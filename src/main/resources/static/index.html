<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Forex AI Bot</title>
<link href="https://fonts.googleapis.com/css2?family=Share+Tech+Mono&family=Sora:wght@300;400;600;700&display=swap" rel="stylesheet"/>
<style>
  :root {
    --bg:        #080c10;
    --surface:   #0d1117;
    --card:      #111820;
    --border:    #1e2d3d;
    --accent:    #00d4aa;
    --accent2:   #0090ff;
    --sell:      #ff4560;
    --hold:      #f5a623;
    --text:      #cdd9e5;
    --muted:     #4a6070;
    --mono:      'Share Tech Mono', monospace;
    --sans:      'Sora', sans-serif;
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }

  body {
    background: var(--bg);
    color: var(--text);
    font-family: var(--sans);
    min-height: 100vh;
    overflow-x: hidden;
  }

  /* Animated grid background */
  body::before {
    content: '';
    position: fixed;
    inset: 0;
    background-image:
      linear-gradient(rgba(0,212,170,.03) 1px, transparent 1px),
      linear-gradient(90deg, rgba(0,212,170,.03) 1px, transparent 1px);
    background-size: 40px 40px;
    pointer-events: none;
    z-index: 0;
  }

  .wrap { position: relative; z-index: 1; max-width: 1100px; margin: 0 auto; padding: 0 24px 60px; }

  /* â”€â”€ HEADER â”€â”€ */
  header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 28px 0 24px;
    border-bottom: 1px solid var(--border);
    margin-bottom: 36px;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 12px;
  }

  .logo-icon {
    width: 40px; height: 40px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border-radius: 10px;
    display: flex; align-items: center; justify-content: center;
    font-size: 20px;
  }

  .logo h1 { font-size: 1.25rem; font-weight: 700; letter-spacing: -.02em; }
  .logo span { font-size: .75rem; color: var(--muted); font-weight: 300; display: block; margin-top: 1px; }

  .status-pill {
    display: flex; align-items: center; gap: 8px;
    background: rgba(0,212,170,.08);
    border: 1px solid rgba(0,212,170,.2);
    border-radius: 20px;
    padding: 6px 14px;
    font-size: .75rem;
    color: var(--accent);
    font-family: var(--mono);
  }

  .dot {
    width: 7px; height: 7px;
    border-radius: 50%;
    background: var(--accent);
    animation: pulse 2s infinite;
  }

  @keyframes pulse {
    0%,100% { opacity: 1; transform: scale(1); }
    50%      { opacity: .4; transform: scale(.8); }
  }

  /* â”€â”€ PAIR SELECTOR â”€â”€ */
  .section-label {
    font-size: .7rem;
    letter-spacing: .12em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 12px;
  }

  .pair-grid {
    display: flex;
    gap: 10px;
    flex-wrap: wrap;
    margin-bottom: 32px;
  }

  .pair-btn {
    background: var(--card);
    border: 1px solid var(--border);
    color: var(--muted);
    font-family: var(--mono);
    font-size: .85rem;
    padding: 9px 18px;
    border-radius: 8px;
    cursor: pointer;
    transition: all .2s;
    letter-spacing: .05em;
  }

  .pair-btn:hover { border-color: var(--accent2); color: var(--accent2); }
  .pair-btn.active {
    background: rgba(0,144,255,.12);
    border-color: var(--accent2);
    color: #fff;
  }

  /* â”€â”€ MAIN GRID â”€â”€ */
  .main-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 20px;
    margin-bottom: 24px;
  }

  @media(max-width:680px){ .main-grid { grid-template-columns: 1fr; } }

  /* â”€â”€ CARD â”€â”€ */
  .card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 14px;
    padding: 24px;
    position: relative;
    overflow: hidden;
  }

  .card::before {
    content: '';
    position: absolute;
    top: 0; left: 0; right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent, rgba(0,212,170,.3), transparent);
  }

  .card-title {
    font-size: .7rem;
    letter-spacing: .12em;
    text-transform: uppercase;
    color: var(--muted);
    margin-bottom: 18px;
  }

  /* â”€â”€ INPUTS â”€â”€ */
  .field-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 12px;
    margin-bottom: 18px;
  }

  .field { display: flex; flex-direction: column; gap: 5px; }

  .field label {
    font-size: .68rem;
    letter-spacing: .08em;
    text-transform: uppercase;
    color: var(--muted);
    font-family: var(--mono);
  }

  .field input {
    background: var(--surface);
    border: 1px solid var(--border);
    border-radius: 7px;
    padding: 9px 12px;
    color: var(--text);
    font-family: var(--mono);
    font-size: .88rem;
    outline: none;
    transition: border-color .2s;
    width: 100%;
  }

  .field input:focus { border-color: var(--accent2); }

  /* â”€â”€ ANALYSE BUTTON â”€â”€ */
  .btn-analyse {
    width: 100%;
    padding: 13px;
    background: linear-gradient(135deg, var(--accent), var(--accent2));
    border: none;
    border-radius: 9px;
    color: #000;
    font-family: var(--sans);
    font-weight: 700;
    font-size: .9rem;
    letter-spacing: .04em;
    cursor: pointer;
    transition: opacity .2s, transform .1s;
    position: relative;
    overflow: hidden;
  }

  .btn-analyse:hover  { opacity: .9; }
  .btn-analyse:active { transform: scale(.98); }
  .btn-analyse:disabled { opacity: .5; cursor: not-allowed; }

  .btn-analyse .spinner {
    display: none;
    width: 16px; height: 16px;
    border: 2px solid rgba(0,0,0,.3);
    border-top-color: #000;
    border-radius: 50%;
    animation: spin .6s linear infinite;
    margin: 0 auto;
  }

  @keyframes spin { to { transform: rotate(360deg); } }

  /* â”€â”€ SIGNAL CARD â”€â”€ */
  .signal-card {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 220px;
    gap: 16px;
  }

  .signal-badge {
    font-size: 2.8rem;
    font-weight: 700;
    font-family: var(--mono);
    letter-spacing: .1em;
    transition: all .4s;
  }

  .signal-badge.BUY  { color: var(--accent); text-shadow: 0 0 30px rgba(0,212,170,.4); }
  .signal-badge.SELL { color: var(--sell);   text-shadow: 0 0 30px rgba(255,69,96,.4); }
  .signal-badge.HOLD { color: var(--hold);   text-shadow: 0 0 30px rgba(245,166,35,.4); }
  .signal-badge.IDLE { color: var(--muted); font-size: 1.1rem; text-shadow: none; letter-spacing: 0; }

  .confidence-ring { position: relative; width: 80px; height: 80px; }

  .confidence-ring svg { transform: rotate(-90deg); }

  .ring-bg    { fill: none; stroke: var(--border); stroke-width: 6; }
  .ring-fill  { fill: none; stroke-width: 6; stroke-linecap: round; transition: stroke-dashoffset .8s ease, stroke .4s; }

  .ring-text {
    position: absolute;
    inset: 0;
    display: flex; align-items: center; justify-content: center;
    font-family: var(--mono);
    font-size: .82rem;
    color: var(--text);
  }

  .should-trade {
    font-size: .78rem;
    padding: 5px 14px;
    border-radius: 20px;
    font-family: var(--mono);
    letter-spacing: .05em;
  }

  .should-trade.yes { background: rgba(0,212,170,.1); border: 1px solid rgba(0,212,170,.3); color: var(--accent); }
  .should-trade.no  { background: rgba(255,69,96,.1);  border: 1px solid rgba(255,69,96,.3);  color: var(--sell); }

  .reason-text {
    font-size: .75rem;
    color: var(--muted);
    text-align: center;
    line-height: 1.5;
    max-width: 260px;
  }

  /* â”€â”€ PROB BARS â”€â”€ */
  .prob-section { margin-top: 4px; }

  .prob-row {
    display: flex;
    align-items: center;
    gap: 10px;
    margin-bottom: 12px;
  }

  .prob-label {
    font-family: var(--mono);
    font-size: .75rem;
    width: 38px;
    flex-shrink: 0;
  }

  .prob-label.BUY  { color: var(--accent); }
  .prob-label.SELL { color: var(--sell); }
  .prob-label.HOLD { color: var(--hold); }

  .prob-track {
    flex: 1;
    height: 6px;
    background: var(--surface);
    border-radius: 3px;
    overflow: hidden;
  }

  .prob-fill {
    height: 100%;
    border-radius: 3px;
    width: 0%;
    transition: width .9s cubic-bezier(.4,0,.2,1);
  }

  .prob-fill.BUY  { background: var(--accent); }
  .prob-fill.SELL { background: var(--sell); }
  .prob-fill.HOLD { background: var(--hold); }

  .prob-val {
    font-family: var(--mono);
    font-size: .72rem;
    color: var(--muted);
    width: 38px;
    text-align: right;
    flex-shrink: 0;
  }

  /* â”€â”€ RISK BADGE â”€â”€ */
  .risk-row {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-top: 20px;
    padding-top: 16px;
    border-top: 1px solid var(--border);
  }

  .risk-label { font-size: .72rem; color: var(--muted); }

  .risk-badge {
    font-family: var(--mono);
    font-size: .75rem;
    padding: 3px 10px;
    border-radius: 4px;
  }

  .risk-badge.LOW    { background: rgba(0,212,170,.1); color: var(--accent); }
  .risk-badge.MEDIUM { background: rgba(245,166,35,.1); color: var(--hold); }
  .risk-badge.HIGH   { background: rgba(255,69,96,.1);  color: var(--sell); }

  /* â”€â”€ QUICK SCENARIOS â”€â”€ */
  .scenario-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 10px;
    margin-bottom: 24px;
  }

  .scenario-btn {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 14px 10px;
    cursor: pointer;
    text-align: center;
    transition: all .2s;
    color: var(--text);
  }

  .scenario-btn:hover { border-color: var(--accent2); transform: translateY(-2px); }

  .scenario-btn .s-icon { font-size: 1.4rem; margin-bottom: 6px; }
  .scenario-btn .s-name { font-size: .72rem; font-weight: 600; display: block; }
  .scenario-btn .s-desc { font-size: .65rem; color: var(--muted); display: block; margin-top: 2px; }

  /* â”€â”€ ALL PAIRS TABLE â”€â”€ */
  .pairs-table { width: 100%; border-collapse: collapse; }

  .pairs-table th {
    font-size: .65rem;
    letter-spacing: .1em;
    text-transform: uppercase;
    color: var(--muted);
    padding: 8px 12px;
    text-align: left;
    border-bottom: 1px solid var(--border);
  }

  .pairs-table td {
    padding: 12px 12px;
    font-family: var(--mono);
    font-size: .82rem;
    border-bottom: 1px solid rgba(30,45,61,.5);
  }

  .pairs-table tr:last-child td { border-bottom: none; }
  .pairs-table tr:hover td { background: rgba(255,255,255,.02); }

  .sig { font-weight: 700; }
  .sig.BUY  { color: var(--accent); }
  .sig.SELL { color: var(--sell); }
  .sig.HOLD { color: var(--hold); }

  /* â”€â”€ TOAST â”€â”€ */
  .toast {
    position: fixed;
    bottom: 28px; right: 28px;
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 10px;
    padding: 12px 18px;
    font-size: .8rem;
    color: var(--sell);
    transform: translateY(80px);
    opacity: 0;
    transition: all .3s;
    z-index: 999;
    max-width: 300px;
  }

  .toast.show { transform: translateY(0); opacity: 1; }

  /* â”€â”€ LOADING SKELETON â”€â”€ */
  .skeleton {
    background: linear-gradient(90deg, var(--card) 25%, var(--border) 50%, var(--card) 75%);
    background-size: 200% 100%;
    animation: shimmer 1.2s infinite;
    border-radius: 4px;
    height: 14px;
    margin-bottom: 8px;
  }

  @keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }
</style>
</head>
<body>

<div class="wrap">

  <!-- HEADER -->
  <header>
    <div class="logo">
      <div class="logo-icon">ðŸ“ˆ</div>
      <div>
        <h1>Forex AI Bot</h1>
        <span>Spring Boot + Weka ML</span>
      </div>
    </div>
    <div class="status-pill">
      <div class="dot"></div>
      <span id="statusText">Connecting...</span>
    </div>
  </header>

  <!-- PAIR SELECTOR -->
  <div class="section-label">Currency Pair</div>
  <div class="pair-grid">
    <button class="pair-btn active" onclick="selectPair(this,'EURUSD')">EUR/USD</button>
    <button class="pair-btn" onclick="selectPair(this,'GBPUSD')">GBP/USD</button>
    <button class="pair-btn" onclick="selectPair(this,'USDJPY')">USD/JPY</button>
    <button class="pair-btn" onclick="selectPair(this,'AUDUSD')">AUD/USD</button>
    <button class="pair-btn" onclick="selectPair(this,'USDCHF')">USD/CHF</button>
  </div>

  <!-- QUICK SCENARIOS -->
  <div class="section-label">Quick Scenarios</div>
  <div class="scenario-grid">
    <div class="scenario-btn" onclick="loadScenario('oversold')">
      <div class="s-icon">ðŸ“‰</div>
      <span class="s-name">Oversold</span>
      <span class="s-desc">RSI: 28 â†’ BUY?</span>
    </div>
    <div class="scenario-btn" onclick="loadScenario('neutral')">
      <div class="s-icon">âž–</div>
      <span class="s-name">Neutral</span>
      <span class="s-desc">RSI: 51 â†’ HOLD?</span>
    </div>
    <div class="scenario-btn" onclick="loadScenario('overbought')">
      <div class="s-icon">ðŸ“ˆ</div>
      <span class="s-name">Overbought</span>
      <span class="s-desc">RSI: 76 â†’ SELL?</span>
    </div>
  </div>

  <!-- MAIN GRID -->
  <div class="main-grid">

    <!-- LEFT: INPUT FORM -->
    <div class="card">
      <div class="card-title">Technical Indicators</div>
      <div class="field-grid">
        <div class="field">
          <label>RSI (0â€“100)</label>
          <input type="number" id="rsi" value="30.5" step="0.1"/>
        </div>
        <div class="field">
          <label>MACD</label>
          <input type="number" id="macd" value="-0.0020" step="0.0001"/>
        </div>
        <div class="field">
          <label>MACD Signal</label>
          <input type="number" id="macdSignal" value="-0.0015" step="0.0001"/>
        </div>
        <div class="field">
          <label>EMA Fast (12)</label>
          <input type="number" id="emaFast" value="1.0820" step="0.0001"/>
        </div>
        <div class="field">
          <label>EMA Slow (26)</label>
          <input type="number" id="emaSlow" value="1.0835" step="0.0001"/>
        </div>
        <div class="field">
          <label>BB Upper</label>
          <input type="number" id="bbUpper" value="1.0900" step="0.0001"/>
        </div>
        <div class="field">
          <label>BB Lower</label>
          <input type="number" id="bbLower" value="1.0750" step="0.0001"/>
        </div>
        <div class="field">
          <label>ATR</label>
          <input type="number" id="atr" value="0.0025" step="0.0001"/>
        </div>
        <div class="field">
          <label>Close Price</label>
          <input type="number" id="close" value="1.0810" step="0.0001"/>
        </div>
        <div class="field">
          <label>Volume</label>
          <input type="number" id="volume" value="15000" step="100"/>
        </div>
      </div>
      <button class="btn-analyse" id="analyseBtn" onclick="analyse()">
        <span id="btnText">ðŸ”® Analyse</span>
        <div class="spinner" id="spinner"></div>
      </button>
    </div>

    <!-- RIGHT: SIGNAL RESULT -->
    <div class="card">
      <div class="card-title">AI Prediction</div>

      <div class="signal-card">
        <div class="signal-badge IDLE" id="signalBadge">Waiting for input...</div>

        <div class="confidence-ring" id="ringWrap" style="display:none">
          <svg width="80" height="80" viewBox="0 0 80 80">
            <circle class="ring-bg"   cx="40" cy="40" r="33"/>
            <circle class="ring-fill" cx="40" cy="40" r="33" id="ringFill"
              stroke-dasharray="207.3" stroke-dashoffset="207.3" stroke="var(--accent)"/>
          </svg>
          <div class="ring-text" id="ringText">0%</div>
        </div>

        <div class="should-trade no" id="tradePill" style="display:none">â€”</div>
        <div class="reason-text" id="reasonText"></div>
      </div>

      <!-- PROBABILITY BARS -->
      <div class="prob-section" id="probSection" style="display:none">
        <div class="prob-row">
          <span class="prob-label BUY">BUY</span>
          <div class="prob-track"><div class="prob-fill BUY" id="buyBar"></div></div>
          <span class="prob-val" id="buyVal">0%</span>
        </div>
        <div class="prob-row">
          <span class="prob-label SELL">SELL</span>
          <div class="prob-track"><div class="prob-fill SELL" id="sellBar"></div></div>
          <span class="prob-val" id="sellVal">0%</span>
        </div>
        <div class="prob-row">
          <span class="prob-label HOLD">HOLD</span>
          <div class="prob-track"><div class="prob-fill HOLD" id="holdBar"></div></div>
          <span class="prob-val" id="holdVal">0%</span>
        </div>

        <div class="risk-row">
          <span class="risk-label">Risk Level</span>
          <span class="risk-badge" id="riskBadge">â€”</span>
        </div>
      </div>
    </div>
  </div>

  <!-- ALL PAIRS CARD -->
  <div class="card">
    <div style="display:flex;align-items:center;justify-content:space-between;margin-bottom:18px">
      <div class="card-title" style="margin:0">All Pairs â€” Live Scan</div>
      <button onclick="scanAll()" style="background:transparent;border:1px solid var(--border);color:var(--muted);padding:6px 14px;border-radius:6px;cursor:pointer;font-size:.75rem;font-family:var(--mono);transition:all .2s"
        onmouseover="this.style.borderColor='var(--accent2)';this.style.color='var(--accent2)'"
        onmouseout="this.style.borderColor='var(--border)';this.style.color='var(--muted)'">
        â†» Scan
      </button>
    </div>
    <table class="pairs-table">
      <thead>
        <tr>
          <th>Pair</th>
          <th>Signal</th>
          <th>Confidence</th>
          <th>Risk</th>
          <th>Trade?</th>
        </tr>
      </thead>
      <tbody id="pairsBody">
        <tr><td colspan="5"><div class="skeleton"></div><div class="skeleton" style="width:60%"></div></td></tr>
      </tbody>
    </table>
  </div>

</div>

<!-- TOAST -->
<div class="toast" id="toast"></div>

<script>
  const API = 'http://localhost:8080/api/forex';
  let selectedPair = 'EURUSD';

  // â”€â”€ Health check â”€â”€
  async function checkHealth() {
    try {
      const r = await fetch(`${API}/health`);
      if (r.ok) {
        document.getElementById('statusText').textContent = 'API Online';
        scanAll();
      } else throw new Error();
    } catch {
      document.getElementById('statusText').textContent = 'API Offline';
      document.querySelector('.dot').style.background = 'var(--sell)';
    }
  }

  // â”€â”€ Pair select â”€â”€
  function selectPair(el, pair) {
    document.querySelectorAll('.pair-btn').forEach(b => b.classList.remove('active'));
    el.classList.add('active');
    selectedPair = pair;
  }

  // â”€â”€ Load scenario â”€â”€
  const scenarios = {
    oversold:   { rsi:28.3,  macd:-0.0020, macdSignal:-0.0015, emaFast:1.0812, emaSlow:1.0826, bbUpper:1.0892, bbLower:1.0742, atr:0.0022, close:1.0800, volume:18000 },
    neutral:    { rsi:51.2,  macd:0.0001,  macdSignal:0.0001,  emaFast:1.0870, emaSlow:1.0869, bbUpper:1.0940, bbLower:1.0800, atr:0.0015, close:1.0850, volume:9000  },
    overbought: { rsi:76.5,  macd:0.0030,  macdSignal:0.0022,  emaFast:1.0935, emaSlow:1.0915, bbUpper:1.1005, bbLower:1.0865, atr:0.0030, close:1.0920, volume:12000 },
  };

  function loadScenario(name) {
    const s = scenarios[name];
    Object.entries(s).forEach(([k,v]) => {
      const el = document.getElementById(k);
      if (el) el.value = v;
    });
    analyse();
  }

  // â”€â”€ Main analyse â”€â”€
  async function analyse() {
    const btn = document.getElementById('analyseBtn');
    const txt = document.getElementById('btnText');
    const spin = document.getElementById('spinner');

    btn.disabled = true;
    txt.style.display = 'none';
    spin.style.display = 'block';

    const body = {
      pair:       selectedPair,
      rsi:        +document.getElementById('rsi').value,
      macd:       +document.getElementById('macd').value,
      macdSignal: +document.getElementById('macdSignal').value,
      emaFast:    +document.getElementById('emaFast').value,
      emaSlow:    +document.getElementById('emaSlow').value,
      bbUpper:    +document.getElementById('bbUpper').value,
      bbLower:    +document.getElementById('bbLower').value,
      atr:        +document.getElementById('atr').value,
      close:      +document.getElementById('close').value,
      volume:     +document.getElementById('volume').value,
    };

    try {
      const res = await fetch(`${API}/predict`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(body)
      });
      const data = await res.json();
      renderResult(data);
    } catch (e) {
      showToast('âŒ Could not connect to API. Make sure Spring Boot is running on port 8080.');
    } finally {
      btn.disabled = false;
      txt.style.display = 'block';
      spin.style.display = 'none';
    }
  }

  // â”€â”€ Render result â”€â”€
  function renderResult(d) {
    // Signal badge
    const badge = document.getElementById('signalBadge');
    badge.textContent = d.signal;
    badge.className = `signal-badge ${d.signal}`;

    // Confidence ring
    const circumference = 207.3;
    const offset = circumference - (d.confidence / 100) * circumference;
    const ringFill = document.getElementById('ringFill');
    ringFill.style.strokeDashoffset = offset;
    ringFill.style.stroke = d.signal === 'BUY' ? 'var(--accent)' : d.signal === 'SELL' ? 'var(--sell)' : 'var(--hold)';
    document.getElementById('ringText').textContent = d.confidence.toFixed(0) + '%';
    document.getElementById('ringWrap').style.display = 'block';

    // Trade pill
    const pill = document.getElementById('tradePill');
    pill.style.display = 'inline-block';
    pill.textContent = d.shouldTrade ? 'âœ… TRADE RECOMMENDED' : 'â›” DO NOT TRADE';
    pill.className = `should-trade ${d.shouldTrade ? 'yes' : 'no'}`;

    // Reason
    document.getElementById('reasonText').textContent = d.reason;

    // Probability bars
    document.getElementById('probSection').style.display = 'block';
    animateBar('buyBar',  'buyVal',  d.buyProbability);
    animateBar('sellBar', 'sellVal', d.sellProbability);
    animateBar('holdBar', 'holdVal', d.holdProbability);

    // Risk
    const risk = document.getElementById('riskBadge');
    risk.textContent = d.riskLevel;
    risk.className = `risk-badge ${d.riskLevel}`;
  }

  function animateBar(barId, valId, val) {
    setTimeout(() => {
      document.getElementById(barId).style.width = val + '%';
      document.getElementById(valId).textContent = val.toFixed(1) + '%';
    }, 50);
  }

  // â”€â”€ Scan all pairs â”€â”€
  async function scanAll() {
    const tbody = document.getElementById('pairsBody');
    tbody.innerHTML = '<tr><td colspan="5"><div class="skeleton"></div><div class="skeleton" style="width:60%"></div></td></tr>';
    try {
      const res = await fetch(`${API}/predict/all`);
      const data = await res.json();
      tbody.innerHTML = data.map(item => `
        <tr>
          <td style="color:#fff;font-weight:600">${item.pair}</td>
          <td><span class="sig ${item.signal}">${item.signal}</span></td>
          <td style="color:var(--text)">${item.confidence}</td>
          <td><span class="risk-badge ${item.riskLevel}">${item.riskLevel}</span></td>
          <td style="color:${item.shouldTrade ? 'var(--accent)' : 'var(--sell)'}">${item.shouldTrade ? 'âœ… Yes' : 'â›” No'}</td>
        </tr>
      `).join('');
    } catch {
      tbody.innerHTML = '<tr><td colspan="5" style="color:var(--muted);text-align:center;padding:20px">API not available</td></tr>';
    }
  }

  // â”€â”€ Toast â”€â”€
  function showToast(msg) {
    const t = document.getElementById('toast');
    t.textContent = msg;
    t.classList.add('show');
    setTimeout(() => t.classList.remove('show'), 4000);
  }

  // â”€â”€ Init â”€â”€
  checkHealth();
</script>
</body>
</html>
